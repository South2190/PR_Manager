# PR_Manager

[![GitHub release (latest by date)](https://img.shields.io/github/v/release/South2190/PR_Manager)](../../releases)
[![](https://img.shields.io/badge/-changelog-green)](changelog.md)

DMM GAMES版「プリンセスコネクト！Re:Dive」の解像度等をいじれるツール。

> **Warning**
> このツールはレジストリを書き換えます。みだりに扱うとコンピューターに思わぬ損害を与える可能性があります。**本ツールを使用したことにより発生した損害については一切の責任を負いかねます。**

> **Note**
> このツールの機能は(実質)プリコネのバグを利用して実現しているものなので、プリコネ側で修正されてしまうと一切機能しなくなる可能性があります。

## なにができるの
- ウインドウモードとフルスクリーンモードの切り替え
- ウインドウサイズを縦横別に任意の値(px)に変更
- ゲーム起動中にリアルタイムでウインドウサイズ変更(開発中)
- ゲーム起動時に表示するディスプレイの選択(マルチモニタ環境のみ利用可能)
- ツールからのゲームの起動・終了、ワンクリックでの強制終了

## 使い方(仮)
各設定項目を入力した後、右下の「適用」ボタンを押します。レジストリを書き換えた旨のメッセージが表示されればOKです。

各設定項目の意味に関してはカーソルを合わせた際に説明が表示されますのでそちらを参考にしてみてください。

> **Note**
> ウインドウサイズがデフォルトに戻されてしまいますので、設定を適用した後ゲームウインドウの端を掴まないように注意してください。

## 動作要件
- OS:Windows10(x64)以降[^1]
- .NET Framework 4.7.2以降インストール済
- DMM GAMES版「プリンセスコネクト！Re:Dive」インストール済
[^1]:Windows8.1以前、x86、ARM64環境では動作確認を行っていません。

## BETA機能について
現在開発中で、試験的に実装している新機能を設定ファイルから有効化することで利用することができます。

### 現在実装されているBETA機能
- ツール起動時に管理者権限を要求する機能
- ゲーム実行中にリアルタイムで解像度の変更を適用する機能[^2],[^3]
- 設定を適用する際のメッセージボックスの表示を無効化する機能(エラーメッセージを除く)
[^2]:この機能を利用するには、ツールを管理者権限で実行する必要があります
[^3]:この機能は、高DPIディスプレイだと上手く動作しない可能性があります。

### BETA機能の有効化手順

> **Note**
> この手順は**バージョン1.0.0.230118以降**で利用することができます。

1. `PR_Manager.exe`を一度実行し、すぐに終了します。`PR_Manager.exe.config`というファイルが同一フォルダ内に生成されます。既に同一ファイルが存在する場合は新たに生成されることはありません。
2. ファイルをテキストエディタで開き、最終行付近(約80行目以降)に以下の項目があることを確認してください。無い場合はツールのバージョンの確認、もしくはファイルを削除した上でもう一度1.から試してください。

```xml
    <!-- BETA機能設定項目
         BETA機能を使用するには、必要なタグのコメントアウトを外してください。 -->
    <!-- 起動時の管理者権限要求 -->
    <!-- <add key="RequireAdmin" value="True" /> -->
    <!-- ゲーム実行中にリアルタイムで解像度の変更を適用(管理者権限が必要) -->
    <!-- <add key="ApplyInRunning" value="True" /> -->
    <!-- 設定を適用する際のメッセージボックスの表示を無効化する(エラーメッセージを除く) -->
    <!-- <add key="ShowApplyMessage" value="False"/> -->
```

3. 有効化したい項目のコメントアウト(`<!--`と`-->`)を外して保存します。

例：`ゲーム実行中にリアルタイムで解像度の変更を適用(管理者権限が必要)`の項目を有効化する場合

```xml
    <!-- ゲーム実行中にリアルタイムで解像度の変更を適用(管理者権限が必要) -->
    <!-- <add key="ApplyInRunning" value="True" /> -->
```
↓↓↓
```xml
    <!-- ゲーム実行中にリアルタイムで解像度の変更を適用(管理者権限が必要) -->
    <add key="ApplyInRunning" value="True" />
```

## 把握済の不具合or今後実装・調整予定の機能
なにかあれば追記します。
